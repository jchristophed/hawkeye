{% extends "layouts.app" %}

{% block breadcrumb %}

    <li class="active">{{ trans_choice('global.flat.title', 2) }}</li>

{% endblock %}

{% block content %}

    <a href="{{ route('residence.flat.create', [residence.id]) }}" title="{{ trans('global.flat.add') }}" class="btn btn-success pull-left">{{ trans('global.flat.add') }}</a>

    <table class="table text-center table-striped" data-toggle="table" data-toolbar="#toolbar"
           data-locale="fr-FR"
           data-classes="table-no-bordered"
           data-search="true"
           data-sortable="true"
           data-sort-name="['lastname', 'firstname', 'status', 'company']"
           data-show-refresh="true"
           data-show-toggle="false"
           data-show-columns="true"
           data-minimum-count-columns="2"
           data-pagination="true"
           data-id-field="id"
           data-page-size="10"
           data-page-list="[10, 25, 50, 100, TOUS]"
           data-show-footer="false">

        <thead>
            <tr>
                <th class="text-center">#</th>
                <th class="text-center" data-field="block" data-sortable="true">{{ trans('global.flat.block') }}</th>
                <th class="text-center" data-field="floor" data-sortable="true">{{ trans('global.flat.floor') }}</th>
                <th class="text-center" data-field="num" data-sortable="true">{{ trans('global.lbl.num') }}</th>
                <th class="text-center" data-field="area" data-sortable="true">{{ trans('global.flat.area') }}</th>
                <th class="text-center" data-field="price" data-sortable="true">{{ trans('global.flat.price') }}</th>
                <th class="text-center" data-field="view" data-sortable="true">{{ trans('global.flat.view') }}</th>
                <th class="text-center">{{ trans_choice('global.lbl.actions', 2) }}</th>
            </tr>
        </thead>

        <tbody>

            {% for flat in flats %}

                <tr>
                    <td>{{ loop.index }}</td>
                    <td>{{ flat.block }}</td>
                    <td>{{ flat.floor }}</td>
                    <td>{{ flat.name }}</td>
                    <td>{{ flat.full_area }}</td>
                    <td>{{ flat.full_price }}</td>
                    <td>{{ flat.view | capitalize }}</td>
                    <td>
                        <div class="btn-group pull-right">
                            <a href="{{ route('residence.flat.show', [residence.id, flat.id]) }}" title="{{ trans('global.lbl.show') }}" class="btn btn-xs btn-default">{{ trans('global.lbl.show') }}</a>
                            <a href="{{ route('residence.flat.edit', [residence.id, flat.id]) }}" title="{{ trans('global.lbl.edit') }}" class="btn btn-xs btn-default">{{ trans('global.lbl.edit') }}</a>
                            <a href="javascript:void(0)" title="{{ trans('global.lbl.delete') }}" data-toggle="modal" data-target="#modal_destroy{{ flat.id }}" class="btn btn-xs btn-danger">{{ trans('global.lbl.delete') }}</a>
                        </div>

                        {# modal suppression #}
                        <div class="modal fade" id="modal_destroy{{ flat.id }}" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
                            <div class="modal-dialog">
                                <div class="modal-content">
                                    <div class="modal-header">
                                        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                                        <h4 class="modal-title">{{ trans('global.flat.delete') }}</h4>
                                    </div>
                                    <div class="modal-body">
                                        <p>{{ trans('global.flat.destroy') }} <strong>{{ flat.full_name }}</strong> ?</p>
                                    </div>

                                    <div class="modal-footer">
                                        {{ form_open({'method' : 'delete', 'route' : ['residence.flat.destroy', residence.id, flat.id]}) }}
                                            <button type="button" class="btn btn-default" data-dismiss="modal">{{ trans('global.lbl.close') }}</button>
                                            {{ form_submit(trans('global.lbl.delete'), {'class' : 'btn btn-danger'}) }}
                                        {{ form_close() }}
                                    </div>

                                </div>
                            </div>
                        </div>
                        {# fin modal suppression #}

                    </td>
                </tr>

            {% endfor %}

        </tbody>

    </table>

{% endblock %}